{"ast":null,"code":"var _jsxFileName = \"/Users/mariusgrondahl/Documents/GitHub/NewbrandPrototype/pages/elbil.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Navbar from \"../Components/Navbar\";\nimport DetailHeader from \"../Components/DetailHeader\";\nimport ArticleCard from \"../Components/ArticleCard\";\nimport styled from '@emotion/styled';\nimport elbiler from '../elbiler.json';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport { withApollo } from \"../lib/apollo\";\nconst DetailWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    padding: 1rem;\n    margin: 0;\n\n    @media (min-width: 800px) {\n      max-width: 680px;\n      flex-direction: column;\n      align-align: center;\n      justify-content: center;\n      flex-wrap: wrap;\n    }\n\n  }\n  `;\nconst Detail = styled.div`\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-self: center;  \n    background: #1d1d1d;\n    color: #fff;\n    padding: .5rem;\n    margin: 0;\n\n  p{\n    margin: 0;\n    line-height: 1.4rem;\n\n  }\n\n  h1, h2, h3, h4{\n    margin-bottom: .3rem;\n  }\n\n  h4{\n    font-size: 1.1rem;\n    font-weight: bold;\n    margin-bottom: 0.8rem;\n  }\n`;\nconst ALL_POSTS_QUERY = gql`\nquery MyBodyText($id: Int) {\n  labrador {\n    article(id: $id) {\n      title\n      subtitle\n      publishedURL\n      sectionTag\n      tags\n      siteDomain\n      imageId\n      bodytextStructured {\n\n        ... on Labrador_HTMLElement {\n          name\n          attributes {\n            key\n            value\n          }\n          children {\n\n            ... on Labrador_HTMLElement {\n              name\n              attributes {\n                key\n                value\n              }\n              children {\n\n                ... on Labrador_HTMLElement {\n                  name\n                  attributes {\n                    key\n                    value\n                  }\n                  children {\n    \n                    ... on Labrador_HTMLElement {\n                      name\n                      attributes {\n                        key\n                        value\n                      }\n                      children {\n      \n                        ... on Labrador_HTMLElement {\n                          name\n                          attributes {\n                            key\n                            value\n                          }\n                     \n                        }\n                        ... on Labrador_Text {\n                          text\n                        }\n                      }\n                    }\n                    ... on Labrador_Text {\n                      text\n                    }\n                  }\n                }\n                ... on Labrador_Text {\n                  text\n                }\n              }\n            }\n            ... on Labrador_Text {\n              text\n            }\n          }\n        }\n      }\n    }\n  }\n}\n`; // Getinng props from query\n\nElbilDetail.getInitialProps = async ({\n  req,\n  query\n}) => {\n  let elbilId = Number(query.id);\n  return {\n    elbilId\n  };\n}; // Getting the text from bodytextStrutured\n\n\nconst traverseElements = (elements = []) => {\n  if (!elements) {\n    return null;\n  }\n\n  return elements.map((el, i) => {\n    if (el[\"__typename\"] === \"Labrador_Text\") {\n      return el.text;\n    } else {\n      switch (el.name) {\n        default:\n          return __jsx(el.name, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, traverseElements(el.children));\n      }\n    }\n  });\n};\n\nfunction ElbilDetail({\n  elbilId\n}) {\n  // Getting article id of tester\n  const articleID = elbiler[elbilId].tester;\n  const {\n    loading,\n    error,\n    data,\n    fetchMore,\n    networkStatus\n  } = useQuery(ALL_POSTS_QUERY, {\n    notifyOnNetworkStatusChange: true,\n    variables: {\n      id: articleID\n    }\n  }); // Stopping if error\n\n  if (error) {\n    console.log(\"Error while fetching data\");\n    return null;\n  } // Using State Hook\n\n\n  const {\n    0: articleTitle,\n    1: setTitle\n  } = useState(\"Tittel\");\n  const {\n    0: articleSubtitle,\n    1: setSubtitle\n  } = useState(\"undertittel\");\n  const {\n    0: articleImage,\n    1: setImage\n  } = useState(undefined);\n  const {\n    0: brand,\n    1: setBrand\n  } = useState(\"brandnavn\");\n  useEffect(() => {\n    // Update the document title using the browser API\n    if (data.labrador === undefined) {\n      const waitMessage = \"Loading\";\n      setTitle(waitMessage), setSubtitle(waitMessage), setImage(waitMessage);\n    } else {\n      const articleTitle = data.labrador.article.title;\n      const subTitle = data.labrador.article.subtitle;\n      const imageId = data.labrador.article.imageId;\n      const image = \"https://www.dagbladet.no/images/\" + imageId + \".jpg?imageId=\" + imageId + \"&width=400&height=auto\";\n      console.log(image);\n      const brand = data.labrador.article.siteDomain;\n      setTitle(articleTitle);\n      setSubtitle(subTitle);\n      setImage(image);\n      setBrand(brand);\n    }\n  }, [data.labrador]); // Filtering out the car that matches the elbilId to an Array with that ID\n\n  const singleElbil = elbiler.filter(elbil => elbil.id === elbilId);\n  console.log(singleElbil);\n\n  const header = __jsx(DetailHeader, {\n    merke: singleElbil[0].modell,\n    modell: singleElbil[0].merke,\n    type: singleElbil[0].type,\n    rekkevidde: singleElbil[0].rekkevidde,\n    pris: singleElbil[0].pris,\n    bildeURL: singleElbil[0].bildeURL,\n    id: singleElbil[0].id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  });\n\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, header, __jsx(DetailWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, __jsx(Navbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }), __jsx(Detail, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, \"Fusce ornare interdum lectus, sodales placerat dolor semper sed. Curabitur lacinia nibh sit amet iaculis ultricies. Ut vel ante vel ligula sagittis finibus in ac leo. Nulla ante dolor, sagittis luctus efficitur a, mollis vitae tellus. Donec blandit lobortis urna sed facilisis. Vivamus consectetur risus at tortor viverra vulputate.\"), __jsx(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, \"Saker om \", singleElbil[0].merke, \" \", singleElbil[0].modell, \":\"), __jsx(ArticleCard, {\n    title: articleTitle,\n    subtitle: articleSubtitle,\n    bildeURL: articleImage,\n    brand: brand,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }))));\n}\n\nexport default withApollo(ElbilDetail);","map":{"version":3,"sources":["/Users/mariusgrondahl/Documents/GitHub/NewbrandPrototype/pages/elbil.js"],"names":["React","useState","useEffect","Navbar","DetailHeader","ArticleCard","styled","elbiler","useQuery","gql","withApollo","DetailWrapper","div","Detail","ALL_POSTS_QUERY","ElbilDetail","getInitialProps","req","query","elbilId","Number","id","traverseElements","elements","map","el","i","text","name","children","articleID","tester","loading","error","data","fetchMore","networkStatus","notifyOnNetworkStatusChange","variables","console","log","articleTitle","setTitle","articleSubtitle","setSubtitle","articleImage","setImage","undefined","brand","setBrand","labrador","waitMessage","article","title","subTitle","subtitle","imageId","image","siteDomain","singleElbil","filter","elbil","header","modell","merke","type","rekkevidde","pris","bildeURL"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Navbar from \"../Components/Navbar\";\nimport DetailHeader from \"../Components/DetailHeader\";\nimport ArticleCard from \"../Components/ArticleCard\";\nimport styled from '@emotion/styled';\n\nimport elbiler from '../elbiler.json';\n\nimport { useQuery } from '@apollo/react-hooks'\nimport gql from 'graphql-tag'\nimport { withApollo } from \"../lib/apollo\"\n\nconst DetailWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    padding: 1rem;\n    margin: 0;\n\n    @media (min-width: 800px) {\n      max-width: 680px;\n      flex-direction: column;\n      align-align: center;\n      justify-content: center;\n      flex-wrap: wrap;\n    }\n\n  }\n  `\n\nconst Detail = styled.div`\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-self: center;  \n    background: #1d1d1d;\n    color: #fff;\n    padding: .5rem;\n    margin: 0;\n\n  p{\n    margin: 0;\n    line-height: 1.4rem;\n\n  }\n\n  h1, h2, h3, h4{\n    margin-bottom: .3rem;\n  }\n\n  h4{\n    font-size: 1.1rem;\n    font-weight: bold;\n    margin-bottom: 0.8rem;\n  }\n`\n\nconst ALL_POSTS_QUERY = gql`\nquery MyBodyText($id: Int) {\n  labrador {\n    article(id: $id) {\n      title\n      subtitle\n      publishedURL\n      sectionTag\n      tags\n      siteDomain\n      imageId\n      bodytextStructured {\n\n        ... on Labrador_HTMLElement {\n          name\n          attributes {\n            key\n            value\n          }\n          children {\n\n            ... on Labrador_HTMLElement {\n              name\n              attributes {\n                key\n                value\n              }\n              children {\n\n                ... on Labrador_HTMLElement {\n                  name\n                  attributes {\n                    key\n                    value\n                  }\n                  children {\n    \n                    ... on Labrador_HTMLElement {\n                      name\n                      attributes {\n                        key\n                        value\n                      }\n                      children {\n      \n                        ... on Labrador_HTMLElement {\n                          name\n                          attributes {\n                            key\n                            value\n                          }\n                     \n                        }\n                        ... on Labrador_Text {\n                          text\n                        }\n                      }\n                    }\n                    ... on Labrador_Text {\n                      text\n                    }\n                  }\n                }\n                ... on Labrador_Text {\n                  text\n                }\n              }\n            }\n            ... on Labrador_Text {\n              text\n            }\n          }\n        }\n      }\n    }\n  }\n}\n`\n\n// Getinng props from query\nElbilDetail.getInitialProps = async ({req, query}) =>{\n  let elbilId = Number(query.id)\n  return {elbilId};\n}\n\n// Getting the text from bodytextStrutured\n  const traverseElements = (elements = []) => {\n    if (!elements) {\n        return null\n    }\n  \n    return elements.map((el, i) => {\n      if (el[\"__typename\"] === \"Labrador_Text\") {\n          return el.text\n      } else {\n          switch (el.name) {\n              default:\n                return (\n                  <el.name>\n                    {traverseElements(el.children)}\n                  </el.name>\n                )\n          }\n      }\n    })\n  }\n  \n\nfunction ElbilDetail({elbilId}) {\n  // Getting article id of tester\n  const articleID = elbiler[elbilId].tester\n\n  const { loading, error, data, fetchMore, networkStatus } = useQuery(\n    ALL_POSTS_QUERY,\n    {\n      notifyOnNetworkStatusChange: true,\n      variables: { id: articleID }\n    }\n  )\n  \n  // Stopping if error\n  if (error) {\n    console.log(\"Error while fetching data\")\n    return null\n  } \n\n  // Using State Hook\n  const [articleTitle, setTitle] = useState(\"Tittel\");\n  const [articleSubtitle, setSubtitle] = useState(\"undertittel\");\n  const [articleImage, setImage] = useState(undefined);\n  const [brand, setBrand] = useState(\"brandnavn\")\n  \n  useEffect(() => {\n    // Update the document title using the browser API\n    if (data.labrador === undefined) {\n      const waitMessage = \"Loading\"\n      setTitle(waitMessage), setSubtitle(waitMessage), setImage(waitMessage)\n    } else {\n      const articleTitle = data.labrador.article.title\n      const subTitle = data.labrador.article.subtitle\n      const imageId = data.labrador.article.imageId\n      const image = \"https://www.dagbladet.no/images/\" + imageId + \".jpg?imageId=\" + imageId + \"&width=400&height=auto\"\n      console.log(image)\n      const brand = data.labrador.article.siteDomain\n\n      setTitle(articleTitle)\n      setSubtitle(subTitle)\n      setImage(image)\n      setBrand(brand)\n    }\n\n  }, [data.labrador] );\n\n  // Filtering out the car that matches the elbilId to an Array with that ID\n  const singleElbil = elbiler.filter (elbil => elbil.id === elbilId)  \n  console.log(singleElbil)\n  const header =  \n      <DetailHeader\n        merke={singleElbil[0].modell} \n        modell={singleElbil[0].merke}  \n        type={singleElbil[0].type}\n        rekkevidde={singleElbil[0].rekkevidde} \n        pris={singleElbil[0].pris} \n        bildeURL={singleElbil[0].bildeURL}\n        id={singleElbil[0].id}\n      />\n      \n    return (\n      <div>\n      {header}\n      <DetailWrapper>\n        <Navbar />\n        <Detail>\n        <p>Fusce ornare interdum lectus, sodales placerat dolor semper sed. Curabitur lacinia nibh sit amet iaculis ultricies. Ut vel ante vel ligula sagittis finibus in ac leo. Nulla ante dolor, sagittis luctus efficitur a, mollis vitae tellus. Donec blandit lobortis urna sed facilisis. Vivamus consectetur risus at tortor viverra vulputate.</p>\n          <h2>Saker om {singleElbil[0].merke} {singleElbil[0].modell}:</h2>\n\n            <ArticleCard title={articleTitle} \n                          subtitle={articleSubtitle} \n                          bildeURL={articleImage}\n                          brand={brand}\n            \n            />   \n        </Detail>           \n\n\n      </DetailWrapper>\n      </div>\n    )\n}\n\nexport default withApollo(ElbilDetail);\n\n\n\n"]},"metadata":{},"sourceType":"module"}