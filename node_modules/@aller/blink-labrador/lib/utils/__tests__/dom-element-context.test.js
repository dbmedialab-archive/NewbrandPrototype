"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var dom_element_context_1 = __importDefault(require("../dom-element-context"));
var mock = [];
function setupGlobalMock(html, query) {
    if (query === void 0) { query = "article>a"; }
    document.body.innerHTML = html;
    var domElement = document.querySelector(query) || document.body;
    mock = dom_element_context_1.default(domElement);
}
describe('domElementContext', function () {
    it('handles context for a link inside a preview without parents', function () {
        setupGlobalMock("\n          <article id=\"article_69676674\" class=\"preview   columns large-8 small-12 medium-8\" itemscope itemprop=\"itemListElement\" itemtype=\"http://schema.org/ListItem\"  role=\"article\" data-id=\"69678379\"  data-label=\"\">\n            <a itemprop=\"url\"  href=\"/motor/dette-var-de-mest-innbringende-fotoboksene-i-fjor/69676674\">\n              <figure class=\"desktopi-66563 mobilei-66887 tableti-66749 mobilebi-66749\">\n                <img class=\"\" itemprop=\"image\" alt=\"Her blir flest tatt av fotoboks\" data-srcset=\"//dbstatic.no/69677238.jpg?imageId=69677238&amp;x=0&amp;y=0&amp;cropw=100&amp;croph=100&amp;width=403&amp;height=269&amp;compression=80 640w, //dbstatic.no/69677238.jpg?imageId=69677238&amp;x=0&amp;y=0&amp;cropw=100&amp;croph=100&amp;width=643&amp;height=428&amp;compression=80 1024w, //dbstatic.no/69677238.jpg?imageId=69677238&amp;x=0&amp;y=0&amp;cropw=100&amp;croph=100&amp;width=604&amp;height=404&amp;compression=70 320w\" src=\"//dbstatic.no/69677238.jpg?imageId=69677238&amp;x=0&amp;y=0&amp;cropw=100&amp;croph=100&amp;width=643&amp;height=428&amp;compression=80\">\n              </figure>\n              <div class=\"section-tag-and-secondary-title\"></div>\n              <div class=\"article-preview-text\">\n                <h1 class=\"headline large-size-49\">\n                  Her blir flest tatt av fotoboks\n                </h1>\n                <div class=\"labels\"></div>\n              </div>\n            </a>\n          </article>");
        expect(mock).toEqual([
            'tag=a&i=1&n=1',
            'tag=article&id=article_69676674&class=columns,large-8,medium-8,preview,small-12&dataId=69678379&i=1&n=1',
        ]);
    });
    it('handles context for a link inside a preview without parents with tag only', function () {
        setupGlobalMock("\n          <article itemprop=\"itemListElement\" itemtype=\"http://schema.org/ListItem\"  role=\"article\"  data-label=\"\">\n            <a itemprop=\"url\"  href=\"/motor/dette-var-de-mest-innbringende-fotoboksene-i-fjor/69676674\">\n              <figure class=\"desktopi-66563 mobilei-66887 tableti-66749 mobilebi-66749\">\n                <img class=\"\" itemprop=\"image\" alt=\"Her blir flest tatt av fotoboks\" data-srcset=\"//dbstatic.no/69677238.jpg?imageId=69677238&amp;x=0&amp;y=0&amp;cropw=100&amp;croph=100&amp;width=403&amp;height=269&amp;compression=80 640w, //dbstatic.no/69677238.jpg?imageId=69677238&amp;x=0&amp;y=0&amp;cropw=100&amp;croph=100&amp;width=643&amp;height=428&amp;compression=80 1024w, //dbstatic.no/69677238.jpg?imageId=69677238&amp;x=0&amp;y=0&amp;cropw=100&amp;croph=100&amp;width=604&amp;height=404&amp;compression=70 320w\" src=\"//dbstatic.no/69677238.jpg?imageId=69677238&amp;x=0&amp;y=0&amp;cropw=100&amp;croph=100&amp;width=643&amp;height=428&amp;compression=80\">\n              </figure>\n              <div class=\"section-tag-and-secondary-title\"></div>\n              <div class=\"article-preview-text\">\n                <h1 class=\"headline large-size-49\">\n                  Her blir flest tatt av fotoboks\n                </h1>\n                <div class=\"labels\"></div>\n              </div>\n            </a>\n          </article>");
        expect(mock).toEqual(['tag=a&i=1&n=1', 'tag=article&i=1&n=1']);
    });
    it('handles recusively all parents up until body', function () {
        setupGlobalMock("\n        <body itemscope itemtype=\"https://schema.org/WebPage\" class=\"abx page-header\" class=\"page-header\">\n        <main class=\"frontpage nomargin compact\" role=\"main\" data-pageId=\"100092\" itemscope itemtype=\"https://schema.org/ItemList\">\n            <div class=\"row\">\n                <div class=\"columns left-lane\">\n                    <div class=\"row   \">\n                        <article id=\"article_70863564\"\n                            class=\"preview   columns large-6 small-6 medium-6             compact\" itemscope\n                            itemprop=\"itemListElement\" itemtype=\"https://schema.org/ListItem\" role=\"article\"\n                            data-id=\"70969210\" data-label=\"\">\n                            <a itemprop=\"url\"\n                                href=\"https://www.dagbladet.no/kjendis/na-er-hun-blitt-mamma/70863564\">\n                                <figure class=\"mobilei-85016 desktopi-76923 tableti-84800 \">\n                                    <img class=\"\" itemprop=\"image\" alt=\"Ble mamma!\"\n                                        data-srcset=\"//2.dbstatic.no/70868190.jpg?imageId=70868190&amp;x=29.807692307692&amp;y=15.138592750533&amp;cropw=58.653846153846&amp;croph=33.119658119658&amp;width=500&amp;height=424&amp;compression=80 640w, //2.dbstatic.no/70868190.jpg?imageId=70868190&amp;x=13.793103448276&amp;y=13.155176678445&amp;cropw=86.206896551724&amp;croph=43.992932862191&amp;width=325&amp;height=250&amp;compression=80 1024w, //2.dbstatic.no/70868190.jpg?imageId=70868190&amp;x=29.807692307692&amp;y=15.138592750533&amp;cropw=58.653846153846&amp;croph=33.119658119658&amp;width=614&amp;height=522&amp;compression=70 320w\"\n                                        src=\"//2.dbstatic.no/70868190.jpg?imageId=70868190&amp;x=13.793103448276&amp;y=13.155176678445&amp;cropw=86.206896551724&amp;croph=43.992932862191&amp;width=325&amp;height=250&amp;compression=80\">\n                                </figure>\n                                <div class=\"article-preview-text\">\n                                    <h1 class=\"headline small-size-27 large-size-40\">\n                                        Ble mamma!\n                                    </h1>\n                                    <div class=\"labels\">\n                                    </div>\n                                </div>\n                            </a>\n                        </article>\n                    </div>\n                </div>\n            </div>\n        </main>\n        </body>\n    ");
        expect(mock).toEqual([
            'tag=a&i=1&n=1',
            'tag=article&id=article_70863564&class=columns,compact,large-6,medium-6,preview,small-6&dataId=70969210&i=1&n=1',
            'tag=div&class=row&i=1&n=1',
            'tag=div&class=columns,left-lane&i=1&n=1',
            'tag=div&class=row&i=1&n=1',
            'tag=main&class=compact,frontpage,nomargin&i=1&n=1',
        ]);
    });
    it('should get index of each element and number of siblings', function () {
        setupGlobalMock("\n      <div class=\"columns left-lane\">\n          <div class=\"row\">\n              <article id=\"article_1\" class=\"preview compact\" itemscope data-id=\"100\">\n                  <a itemprop=\"url\" href=\"https://www.dagbladet.no&/kjendis/hallo/100\">\n                    <figure class=\"mobilei-85016 desktopi-76923 tableti-84800 \"></figure>\n                    <div class=\"article-preview-text\">\n                        <h1 class=\"headline small-size-27 large-size-40\">\n                            Hallo!\n                        </h1>\n                        <div class=\"labels\">\n                        </div>\n                    </div>\n                  </a>\n              </article>\n          </div>\n          <div class=\"row\">\n              <article id=\"article_2\" class=\"preview compact\" itemscope data-id=\"200\">\n                  <a itemprop=\"url\" href=\"https://www.dagbladet.no/kjendis/aloha/200\">\n                    <figure class=\"mobilei-85016 desktopi-76923 tableti-84800 \">\n                    </figure>\n                    <div class=\"article-preview-text\">\n                        <h1 class=\"headline small-size-27 large-size-40\">\n                            Aloha!\n                        </h1>\n                        <div class=\"labels\">\n                        </div>\n                    </div>\n                  </a>\n              </article>\n          </div>\n          <div class=\"row\">\n              <article id=\"article_3\" class=\"preview compact\" itemscope data-id=\"300\">\n                  <a itemprop=\"url\" href=\"https://www.dagbladet.no/kjendis/hey/300\">\n                    <figure class=\"mobilei-85016 desktopi-76923 tableti-84800 \"></figure>\n                    <div class=\"article-preview-text\">\n                        <h1 class=\"headline small-size-27 large-size-40\">\n                            Hey!\n                        </h1>\n                        <div class=\"labels\"></div>\n                    </div>\n                  </a>\n              </article>\n          </div>\n      </div>\n    ", 'article.preview[data-id="200"] .headline');
        expect(mock).toEqual([
            'tag=h1&class=headline,large-size-40,small-size-27&i=1&n=2',
            'tag=div&class=article-preview-text&i=2&n=2',
            'tag=a&i=1&n=1',
            'tag=article&id=article_2&class=compact,preview&dataId=200&i=1&n=1',
            'tag=div&class=row&i=2&n=3',
            'tag=div&class=columns,left-lane&i=1&n=1',
        ]);
    });
});
//# sourceMappingURL=dom-element-context.test.js.map