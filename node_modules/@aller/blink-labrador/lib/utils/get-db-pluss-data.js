"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var cookie_utils_1 = require("./cookie-utils");
var plussData = { hasAccess: false, customerNumber: '' };
function getPlussData(doc, nocache, cachedPlussData) {
    if (doc === void 0) { doc = document; }
    if (nocache === void 0) { nocache = false; }
    if (cachedPlussData === void 0) { cachedPlussData = plussData; }
    // Fetch id from cache if we have it
    if (cachedPlussData && !nocache) {
        return cachedPlussData;
    }
    // Fetch id from cookie if we have it
    var plussDataRaw = cookie_utils_1.getCookie(doc, 'xavier_pluss');
    if (plussDataRaw) {
        var decodedPlussData = decodeURIComponent(plussDataRaw);
        var parsedDecodedPlussData = JSON.parse(decodedPlussData);
        if (parsedDecodedPlussData.access &&
            parsedDecodedPlussData.customer_number) {
            plussData = {
                hasAccess: parsedDecodedPlussData.access,
                customerNumber: parsedDecodedPlussData.customer_number.toString(),
            };
            return plussData;
        }
    }
    plussData = { hasAccess: false, customerNumber: '' };
    return plussData;
}
exports.default = getPlussData;
//# sourceMappingURL=get-db-pluss-data.js.map