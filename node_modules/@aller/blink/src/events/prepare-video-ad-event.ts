import generalData from '../utils/general-data';
import { BlinkEvent } from '../types';
import { Page } from '../selectors/get-page-state';

export interface PrepareVideoAdEventInput {
  page: Page;
  videoId: string;
  adPosition: string;
  time?: Date;
  system?: string;
  title?: string;
  client?: string;
  viewable?: number;
  adId?: string;
  isBumper?: boolean;
  creativeId?: string;
  duration?: number;
}

export default function prepareVideoAdForSending(
  input: PrepareVideoAdEventInput,
): BlinkEvent {
  return {
    ...generalData(input.page.state),
    type: 'videoAd',
    id: input.videoId,
    videoId: input.videoId,
    time: input.time || new Date(),
    videoAdPosition: input.adPosition,
    system: input.system,
    title: input.title,
    client: input.client,
    viewable: input.viewable,
    adId: input.adId,
    isBumper: input.isBumper,
    creativeId: input.creativeId,
    duration: input.duration,
  };
}
